# 2.1 UserDaoTest 다시 보기

## 2.1.1 테스트의 유용성

이전에 만들었던 `UserDaoTest`의 테스트 덕분에, 다양한 방법으로 개선한 초난감 UserDao의 기능이 동작하는지를 확인할 수 있었다.

> 테스트란 내가 예상/의도했던 대로 코드가 정확히 동작하는지를 확인해서 만든 코드를 확신하게 해주는 작업이다.

테스트의 결과가 원하는대로 나오지 않으면 결함이 있음을 알 수 있으며, 그 결함들을 제거해나가는 **디버깅**을 거치게 되고, 최종적으로 테스트가 성공하면 모든 결함이 제거됐다는 확신을 얻을 수 있다.

## 2.1.2 UserDaoTest의 특징

`UserDaoTest`는 `main()`메소드를 이용하며, 테스트할 대상인 UserDao를 직접 호출해서 사용한다는 특징이 있다.

### Web을 통한 DAO테스트 방법의 문제점
보통 DAO를 테스트할 때, DAO를 만든 뒤 바로 테스트하지 않고 서비스 계층 / MVC 계층까지 포함한 모든 입출력을 대충이라도 만든 후 웹 화면을 띄워서 확인한다. 

이렇게 웹 화면을 통해 기능을 수행하고 결과를 입력하는 방법은 가장 흔히 쓰이지만, DAO뿐만 아니라 서비스클래스, 컨트롤러, JSP view 등 모든 레이어의 기능을 만든 후 수행하므로 에러가 나도 어디서 난지 모른다는 문제가 있다!

그렇다면 어떻게 테스트를 만들어야 효율적으로 테스트했다고 소문이 날 수 있는지 생각해보자.

### 작은 단위의 테스트
테스트는 가능하면 작은 단위로 쪼개서 집중할 수 있어야 한다. UserDaoTest는 한 가지 관심에 집중해 작은 단위로 만들어진 테스트다.

> 단위 테스트(Unit Test) : 작은 단위의 코드에 대해 테스트를 수행한 것. 개발자 테스트, 프로그래머 테스트 라고도 한다.

여기서 말하는 단위란 무엇인지, 그 크기와 범위가 어느 정도인지 딱 정해진것은 아니다. 일반적으로 **단위는 작을 수록 좋다.** 다른 계층이 참여하지 않고도 테스트를 할 수 있을 수록 좋다. 때로는 웹 사용자 인터페이스로부터 시작해서 DB까지 전 계층이 참여하는 테스트가 필요할 때도 있다. 그럴때는 작은 단위의 테스트를 먼저 수행하고, 긴 단위의 테스트를 수행하는것이 좋다. 
### 자동수행 테스트 코드

UserDaoTest는 main()메소드 만으로 테스트의 전 과정이 자동으로 다 진행된다. 그러니 테스트를 자주 수행해도 부담이 없다.

> 테스트는 자동으로 수행되도록 코드로 만들어지는것이 중요하다.

그런데, App을 구성하는 클래스 안에 테스트 코드를 포함시키는 것보다는 별도로 테스트용 클래스를 만들어서 테스트 코드를 넣는것이 좋다. 

### 지속적인 개선과 점진적인 개발을 위한 테스트
처음 만든 초난감 DAO 코드를 스프링을 이용한 깔끔하고 완성도 높은 객체지향적 코드로 발전시키는 과정이 가능했던건 처음에 만든 UserDaoTest 덕분이었다. 

기능을 추가하려고 할 때도 미리 만들어둔 테스트 코드는 유용하게 쓰인다.

> 테스트를 이용하면 새로운 기능도 기대한대로 동작하는지 확인할 수 있을뿐 아니라, 기존에 만들어둔 새로운 기능을 추가하느라 수정한 코드에 영향을 받지 않고 여전히 잘 동작하는지 확인할 수도 있다.


## 2.1.3 UserDaoTest의 문제점

- 수동 확인 작업의 번거로움 : 여전히 사람의 눈으로 확인해야 함
- 실행 작업의 번거로움 : DAO가 수백개가 되고 그에 대한 main()메소드도 그만큼 만들어진다면, main()메소드도 수백 번 확인해야 하는 문제가 생긴다. 
